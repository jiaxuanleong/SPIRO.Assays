## Background

These two assays were developed for high-throughput analysis of data acquired by [SPIRO](https://www.alyonaminina.org/spiro), the [Smart Plate Imaging RObot](https://github.com/jonasoh/spiro). The assay were optimized for imaging <i>Arabidopsis thaliana</i> seeds and seedlings, but can be optimized for other species. 

Each assay comprises three major steps:
1. Image processing using the ImageJ macro `SPIRO_Registration`
2. Image analysis using the ImageJ macro `SPIRO_Germination` or `SPIRO_RootGrowth`
3. Further data analysis using the accompanying R scripts

## Image processing

[**Preprocessing**](https://github.com/jiaxuanleong/spiro-IJmacros/tree/master/preprocessing)

This macro will process all four folders of a SPIRO experiment.

- combining separate images into one time-lapse stack file
- setting the scale
- resizing the stack by cropping off edges
- correcting for image drift

## Image analysis

[**Germination analysis**](https://github.com/jiaxuanleong/spiro-IJmacros/tree/master/germination)

SPIRO_Germination macro (ImageJ Macro Language):
This macro will analyze all four folders of a SPIRO experiment, using data processed by the SPIRO_Registration macro.

- defining a range of time points that will be included into analysis
- selecting groups of seeds that will be analyzed together, e.g. the same genotype
- processing of images to identify seed positions 
- measurement of square and perimeter of each seed at each time point
- creating a time-lapse stack file illustrating quality of seed recognition for each group
- saving results as tab-delimited text files to be processed using [the accompanying R scripts](https://github.com/jiaxuanleong/spiro-IJmacros/tree/master/germination).

The bundled R scripts will analyze data generated by the `SPIRO_Germination` macro:

### Quality control
- quality control to remove any objects that were mistakingly recognized as seeds
- results are saved in tab-delimited output.txt file

### Data processing
- data processing to determine time of germination for each seed
- statistical analysis to determine the time at which 50% of seed germinated and to compare user-defined groups
- results are saved in tab-delimited text files

[**Root growth**](https://github.com/jiaxuanleong/spiro-IJmacros/tree/master/rootgrowth)

This ImageJ macro will analyze all four folders of a SPIRO experiment, using data processed by the SPIRO_Registration macro.

- defining a range of time points that will be included into analysis
- selecting groups of seedlings that will be analyzed together, e.g. the same genotype
- processing of images to identify seedling positions 
- measurement of primary root length for each seed at each time point
- creating a time-lapse stack file illustrating quality of root recognition for each group
- saving results as tab-delimited text files to be processed using [bundled R scripts](https://github.com/jiaxuanleong/spiro-IJmacros/tree/master/rootgrowth).

The R script will then analyze the resulting data:

### Quality control
- quality control to remove any objects that were mistakingly recognized as primary roots
- results are saved in tab-delimited output.txt file

### Data processing
- data processing to determine root length for each seedling at each time point
- statistical analysis to determine the average rooth growth speed for each group
- results are saved in tab-delimited text files

## Installation

### Macro
- Download the macro (.ijm file)
- Open ImageJ
- Go to Plugins-> Macro-> Open->Find the downloded macro file

### R scripts (easy install using git and R Studio)
- Open Rstudio
- File -> New Project -> Version Control -> Git -> Repository URL: https://github.com/jiaxuanleong/spiro-IJmacros 

## Requirements

- [ImageJ v1.52p](https://imagej.net/Fiji/Downloads)
- [TurboReg](http://bigwww.epfl.ch/thevenaz/turboreg/)
- [R](https://www.r-project.org/)
- [R Studio](https://www.rstudio.com/) (not necessary, but highly recommended)
- R packages are specified in the corresponding README files
